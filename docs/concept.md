# 概念

本部分介绍PixelRenderer中的所有概念，以对PixelRenderer的设计思想、运行流程有更充分的了解。让我们从最基本的元素开始吧。
## 元素-PixelElement

声明周期
元素声明周期为 init,



元素是PixelRenderer中最基本的渲染单位，小到一个像素，大到覆盖整个画面的图形都可以成为元素。对于每个元素应定义元素的大小，以及元素的样式。

元素提供了两种样式定义方式：
- 使用掩膜+颜色样式定义元素样式。
- 直接传入元素样式。


## 画布-PixelCanvas
画布作为元素的容器，用于承载各种不同的元素。画布提供了各种不同的元素操作方式，如放置元素，移除元素等。当画布内容发生变更后，画布会自动调度渲染器对元素发生的变化进行渲染。


## 渲染器-Renderer
渲染器是渲染引擎的核心。渲染器接收画布的变更，并操作效果器和层叠渲染器进行渲染。
渲染的流程如下：
1. 检测元素发生的变化，过渡效果对应的效果器。
2. 使用对应的效果器进行过渡渲染。
3. 使用层叠渲染器的层渲染对效果器返回的过渡效果逐帧、逐层进行层渲染。
4. 使用层叠渲染器的画布渲染对层进行合并，返回最终画面。

由此可见，效果器决定了过渡动画的效果，所以PixelRenderer引擎提供了效果器的自定义能力，提供用户更多元的渲染效果。

## 效果器-Effector
效果器用于渲染元素变化时的过渡效果。PixelRenderer提供了几种默认的效果器用于渲染过渡效果。用户也可以自定义渲染效果器，只需实现AbstractEffector或AbstractThreadingEffector（使用多线程渲染）抽象类中的抽象方法，命名为Effector类并放置于effectors包下，即可实现自定义效果过渡。自定义效果器见[自定义效果器](http://doc.lllhy.com/web/# "自定义效果器")章节

为了实现效果器的动态加载，我们实现了效果器加载组件，程序运行时使用动态加载组件初始化所有效果器。效果渲染时若效果器无效将使用默认的效果器进行渲染。

## 层叠渲染器-LayerRenderer
层叠渲染器有两部分功能：
- 层渲染：主要对过渡效果合并至元素所在层和所在位置，得到逐层逐帧的过渡动画。
- 画布渲染：层渲染的逐帧、逐层的结果为中间结果，并不能直接用于显示。需要对层进行合并，得到最终的画布画面。





